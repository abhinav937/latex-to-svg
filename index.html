<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-F2SG9BQRKK"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-F2SG9BQRKK');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LaTeX Image Generator</title>
    <meta name="description" content="A web-based LaTeX to SVG generator, an easy alternative to TexText for creating mathematical equations.">
    <meta name="keywords" content="LaTeX, SVG, TexText, Inkscape, math equations, image generator">
    <meta name="author" content="Abhinav Chinnusamy">
    <meta name="robots" content="index, follow, max-image-preview:large">

    <!-- Favicon and Icons -->
    <link rel="shortcut icon" href="./assets/icons/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="180x180" href="./assets/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./assets/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./assets/icons/favicon-16x16.png">
    <link rel="manifest" href="./site.webmanifest">

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="LaTeX Image Generator">
    <meta property="og:description" content="Generate high-quality SVG images from LaTeX code, no installation required. A web-based alternative to TexText for Inkscape.">
    <meta property="og:image" content="https://latex.cabhinav.com/assets/icons/share_preview.png">
    <meta property="og:image:alt" content="LaTeX Image Generator Preview">
    <meta property="og:url" content="https://latex.cabhinav.com">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="LaTeX Image Generator">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="LaTeX Image Generator">
    <meta name="twitter:description" content="Generate high-quality SVG images from LaTeX code, no installation required. A web-based alternative to TexText for Inkscape.">
    <meta name="twitter:image" content="https://latex.cabhinav.com/assets/icons/share_preview.png">
    <meta name="twitter:creator" content="@abhinav_937">
    <meta name="twitter:site" content="@abhinav_937">

    <!-- Structured Data (Schema.org) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "LaTeX Image Generator",
      "url": "https://latex.cabhinav.com",
      "description": "A web-based tool to generate SVG images from LaTeX code, serving as an alternative to TexText for Inkscape.",
      "creator": {
        "@type": "Person",
        "name": "Abhinav Chinnusamy",
        "url": "https://cabhinav.com"
      },
      "applicationCategory": "Utility",
      "operatingSystem": "Web"
    }
    </script>

    <!-- Material Web Components CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@material/web@2.0.0/dist/material-web.css" crossorigin="anonymous" onerror="console.error('Failed to load Material Web CSS')">
    <!-- Material Web Components JS -->
    <script type="module" src="https://cdn.jsdelivr.net/npm/@material/web@2.0.0/dist/material-web.js" crossorigin="anonymous" onerror="console.error('Failed to load Material Web JS')"></script>
    <!-- Fallback to alternative CDN -->
    <script type="module">
      // Fallback with better error handling
      if (!customElements.get('md-outlined-text-field')) {
        const loadFallback = () => {
          const script = document.createElement('script');
          script.type = 'module';
          script.src = 'https://esm.sh/@material/web@2.0.0/dist/material-web.js';
          script.crossOrigin = 'anonymous';
          script.onerror = () => {
            console.error('All Material Web Components sources failed');
            const errorMessage = document.getElementById('error-message');
            if (errorMessage) {
              errorMessage.innerHTML = `<strong>Loading Error:</strong> Material Web Components failed to load. Please check your internet connection and refresh the page.`;
              errorMessage.style.display = 'block';
            }
          };
          document.head.appendChild(script);
        };
        
        // Check after 1 second
        setTimeout(() => {
          if (!customElements.get('md-outlined-text-field')) {
            loadFallback();
          }
        }, 1000);
      }
    </script>
    <!-- Roboto Font -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap">
    <!-- Material Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <!-- Material Symbols -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <!-- Styles -->
    <link rel="stylesheet" href="./style.css">
    <!-- Script -->
    <script defer src="./script.js"></script>
    <!-- Additional bundled scripts (if needed) -->
    <script src="./bundle.js"></script>
</head>
<body>
  <header>
    <div class="logo">LaTeX Image Generator</div>
    <nav>
      <a href="./help/">Help</a>
    </nav>
  </header>

  <div class="container">
    <div class="content-wrapper">
      <!-- Main Content -->
      <div class="main-content">
        <div class="button-group">
          <md-assist-chip
            class="filter-chip-style"
            id="example1"
            label="div E = ρ / ε₀"
            onclick="setExample('$\\nabla \\cdot \\mathbf{E} = \\frac{\\rho}{\\varepsilon_0}$')"
            data-tooltip="Maxwell Equation example"
          ></md-assist-chip>
          <md-assist-chip
            class="filter-chip-style"
            id="example2"
            label="Subscript (V_gs)"
            onclick="setExample('$V_{gs}$')"
            data-tooltip="Subscript example"
          ></md-assist-chip>
          <md-assist-chip
            class="filter-chip-style"
            id="example3"
            label="Fraction (di/dt)"
            onclick="setExample('$\\frac{di}{dt}$')"
            data-tooltip="Fraction example"
          ></md-assist-chip>
          <md-assist-chip
            class="filter-chip-style"
            id="example4"
            label="Sum"
            onclick="setExample('$\\sum_{n=1}^{\\infty} \\frac{1}{n^2}$')"
            data-tooltip="Sum example"
          ></md-assist-chip>
        </div>

        <md-outlined-text-field
          id="latex-input"
          type="textarea"
          rows="3"
          label="LaTeX Command"
          placeholder="Enter LaTeX code (e.g., $E = mc^2$ or R_{DS})"
          aria-label="LaTeX input"
        ></md-outlined-text-field>

        <div class="action-buttons">
          <div style="position: relative; display: inline-block;">
            <md-filled-button onclick="renderLaTeX()" id="render-button">Render</md-filled-button>
            <md-circular-progress id="render-spinner" indeterminate style="position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%) scale(0.75); display: none;"></md-circular-progress>
          </div>
          <md-assist-chip onclick="clearInput()" id="clear-button">
            <md-icon slot="icon">clear</md-icon>
            Clear
          </md-assist-chip>
          <div class="scale-control">
            <label for="scale-input" class="scale-label">Point Size:</label>
            <input type="number" id="scale-input" min="8" max="72" value="12" step="1" class="scale-input">
            <span class="scale-unit">pt</span>
          </div>
        </div>

        <div id="latex-preview">
          <img id="latex-image" src="" alt="LaTeX Rendered Image" style="display: none;">
          <div id="image-actions" style="display: none;">
            <md-icon-button onclick="copyImage()" id="copy-button" data-tooltip="Copy SVG to clipboard">
              <md-icon>content_copy</md-icon>
            </md-icon-button>
            <md-icon-button onclick="downloadImage()" id="download-button" data-tooltip="Download SVG">
              <md-icon>download</md-icon>
            </md-icon-button>
            <md-icon-button onclick="shareImage()" id="share-button" data-tooltip="Share SVG">
              <md-icon>ios_share</md-icon>
            </md-icon-button>
            <md-icon-button onclick="copySVGCode()" id="copy-svgcode-button" data-tooltip="Copy SVG code" style="display:none;">
              <md-icon>code</md-icon>
            </md-icon-button>
          </div>
        </div>

        <div id="error-message"></div>

        <!-- Move instructions to the bottom -->
        <div class="instructions">
          <p><strong>How to use:</strong></p>
          <ul>
            <li>Enter LaTeX commands (e.g., <code>$E = mc^2$</code> or <code>R\textsubscript{ds,on}</code>)</li>
            <li>Use <code>$...$</code> or <code>$$...$$</code> for math mode (italicized equations) or plain text for upright text</li>
            <li><strong>💡 Autocomplete:</strong> Type <code>\</code> followed by any letter to see LaTeX command suggestions with arguments</li>
          </ul>
        </div>
      </div>

      <!-- Sidebar for History -->
      <aside class="sidebar">
        <div class="hero">
          <h1>Create LaTeX Equations Instantly</h1>
          <p>Generate high-quality SVG images from LaTeX code, no installation required. A web-based alternative to TexText for Inkscape.</p>
        </div>
        <div id="history-section">
          <h2 style="font-size: 18px; font-weight: 500; color: var(--md-sys-color-on-surface);">Recent LaTeX Commands</h2>
          <div id="history-list" style="max-height: 300px; overflow-y: auto;"></div>
          <div class="action-buttons" style="margin-top: 8px;">
            <md-outlined-button onclick="clearHistory()" id="clear-history">Clear History</md-outlined-button>
          </div>
        </div>
      </aside>
    </div>
  </div>

  <footer>
    <div class="footer-content">
      <div class="footer-section">
      </div>
    </div>
    <div class="back-to-top">
      <md-text-button onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
        Back to Top
      </md-text-button>
      <p>© 2025 <a href="https://cabhinav.com">Abhinav Chinnusamy</a></p>
    </div>
  </footer>
</body>
</html>